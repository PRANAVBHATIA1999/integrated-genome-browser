package com.affymetrix.igb.bookmarks;

import com.affymetrix.genometryImpl.util.PreferenceUtils;
import java.awt.Rectangle;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;

/**
 *
 * @author nick
 */
public class BookmarkPropertiesGUI extends JFrame {

	private static BookmarkPropertiesGUI singleton;
	private BookmarkData bp;
	private static final String TITLE = "Bookmark Properties";

	public static synchronized BookmarkPropertiesGUI getSingleton() {
		if (singleton == null) {
			singleton = new BookmarkPropertiesGUI();
		}
		return singleton;
	}

	public BookmarkPropertiesGUI() {
		bp = BookmarkData.getSingleton();
		
		Rectangle pos = PreferenceUtils.retrieveWindowLocation(TITLE, new Rectangle(400, 400));
		if (pos != null) {
			PreferenceUtils.setWindowSize(this, pos);
		}

		this.setTitle(TITLE);
		this.addWindowListener(new WindowAdapter() {

			@Override
			public void windowClosing(WindowEvent evt) {
				saveWindowLocation();
			}
		});

		initComponents();
	}

	// Writes the window location to the persistent preferences.
	private void saveWindowLocation() {
		PreferenceUtils.saveWindowLocation(singleton, TITLE);
	}

	public synchronized void displayPanel(BookmarkList bl) {
		bp.setPropertyGUIFromBookmark(bl);
		this.setVisible(true);
	}

	/** This method is called from within the constructor to
	 * initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is
	 * always regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        table = bp.getPropertyTable();

        setTitle("Bookmark Properties");

        jScrollPane1.setViewportView(table);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 414, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 408, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable table;
    // End of variables declaration//GEN-END:variables
}
